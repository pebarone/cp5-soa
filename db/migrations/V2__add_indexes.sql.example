-- ========= EXEMPLO DE MIGRAÇÃO V2 ==========
-- Esta migração adiciona índices para melhorar performance das consultas

-- Índice para buscar reservas por hóspede
CREATE INDEX idx_reservations_guest 
ON RESERVAS_RESERVATIONS(guest_id);

-- Índice para buscar reservas por quarto
CREATE INDEX idx_reservations_room 
ON RESERVAS_RESERVATIONS(room_id);

-- Índice para buscar reservas por status
CREATE INDEX idx_reservations_status 
ON RESERVAS_RESERVATIONS(status);

-- Índice para buscar reservas por data de check-in
CREATE INDEX idx_reservations_checkin 
ON RESERVAS_RESERVATIONS(check_in);

-- Índice composto para buscar disponibilidade de quartos
CREATE INDEX idx_reservations_room_dates 
ON RESERVAS_RESERVATIONS(room_id, check_in, check_out, status);

-- Comentários sobre os índices
COMMENT ON INDEX idx_reservations_guest IS 'Índice para otimizar consultas de reservas por hóspede';
COMMENT ON INDEX idx_reservations_room IS 'Índice para otimizar consultas de reservas por quarto';
COMMENT ON INDEX idx_reservations_status IS 'Índice para otimizar filtros por status de reserva';
COMMENT ON INDEX idx_reservations_checkin IS 'Índice para otimizar consultas por data de check-in';
COMMENT ON INDEX idx_reservations_room_dates IS 'Índice composto para otimizar verificação de disponibilidade';
